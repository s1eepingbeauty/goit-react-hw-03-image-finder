(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{20:function(e,t,a){},22:function(e,t,a){},23:function(e,t,a){},24:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(8),r=a.n(n),o=a(11),c=a(3),i=a(4),s=a(6),l=a(5),u=a(1),h=function(e,t){var a="".concat("https://pixabay.com/api/?image_type=photo&orientation=horizontal&per_page=12","&q=").concat(encodeURIComponent(e),"&page=").concat(t,"&key=").concat("19951456-e393dc841832362ddd9551c23");return fetch(a).then((function(e){return e.json()})).then((function(e){return e.hits})).catch((function(e){return console.log(e)}))},d=a(7),m=(a(19),a(12),a(13),a(20),a(0));d.defaults.styling="material",d.defaults.icons="material";var g=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={initialValue:""},e.handleSubmit=function(t){t.preventDefault();var a=e.state.initialValue,n=e.props.onSubmit;""===a&&Object(d.error)({text:"Please enter your query",hide:!0,delay:2e3}),n(a),e.setState({initialValue:""})},e.handleInputChange=function(t){var a=t.target.value;e.setState({initialValue:a.toLowerCase()})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.initialValue;return Object(m.jsx)("header",{className:"Searchbar",children:Object(m.jsxs)("form",{className:"SearchForm",onSubmit:this.handleSubmit,children:[Object(m.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(m.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(m.jsx)("input",{className:"SearchForm-input",onChange:this.handleInputChange,value:e,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})}}]),a}(u.Component),p=(a(22),function(e){var t=e.webformatURL,a=e.tags,n=e.largeImageURL;return Object(m.jsx)("li",{className:"ImageGalleryItem",children:Object(m.jsx)("img",{className:"ImageGalleryItem-image",src:t,alt:a,"data-source":n})})}),b=(a(23),function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.onImgClick,a=e.imgData;return Object(m.jsx)("ul",{className:"ImageGallery",onClick:t,children:a.map((function(e,t){var a=e.webformatURL,n=e.tags,r=e.largeImageURL;return Object(m.jsx)(p,{webformatURL:a,tags:n,largeImageURL:r},t)}))})}}]),a}(u.Component)),j=(a(24),function(e){var t=e.onClick;return Object(m.jsx)("button",{className:"Button",type:"button",onClick:function(){t()},children:"Load more"})}),f=a(9),v=a.n(f),y=(a(45),document.querySelector("#modal-root")),O=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={showSpinner:!0},e.handleKeyDown=function(t){"Escape"===t.code&&(e.props.onClose(),e.setState({showSpinner:!0}))},e.handleOverlayClick=function(t){t.currentTarget===t.target&&(e.props.onClose(),e.setState({showSpinner:!0}))},e.handleImgLoad=function(){e.setState({showSpinner:!1})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.props,t=e.url,a=e.alt,r=this.state.showSpinner;return Object(n.createPortal)(Object(m.jsx)("div",{className:"Overlay",onClick:this.handleOverlayClick,children:Object(m.jsxs)("div",{className:"Modal",children:[Object(m.jsx)(v.a,{className:"spinner",type:"Oval",color:"#00BFFF",height:80,width:80,visible:r}),Object(m.jsx)("img",{className:"modalImg",src:t,alt:a,onLoad:this.handleImgLoad})]})}),y)}}]),a}(u.Component),w=(a(46),function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={searchQuery:"",page:1,imgData:[],currentImg:{},showModal:!1,showSpinner:!1},e.handleSubmit=function(t){e.setState({searchQuery:t,page:1})},e.handleFetchData=function(t){var a=e.state.page;h(t,a).then((function(t){if(0===t.length)return Object(d.error)({text:"No matching images found, please enter new search terms...",hide:!0,delay:2e3});e.setState((function(e){return{imgData:[].concat(Object(o.a)(e.imgData),Object(o.a)(t))}})),Object(d.success)({text:"Here you go :)",hide:!0,delay:1e3})})).catch((function(e){var t=e.message;return console.log(t)})).finally((function(){e.setState({showSpinner:!1}),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"}),e.setState((function(e){return{page:e.page+=1}}))}))},e.handleLoadMore=function(){var t=e.state.searchQuery;e.setState({showSpinner:!0}),e.handleFetchData(t)},e.handleImgClick=function(t){var a=t.target,n=a.dataset.source,r=a.alt;"IMG"===a.nodeName&&e.setState({currentImg:{url:n,alt:r}}),e.toggleModal()},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=t.searchQuery,n=this.state.searchQuery;n!==a&&(this.setState({imgData:[],showSpinner:!0}),this.handleFetchData(n))}},{key:"render",value:function(){var e=this.state,t=e.imgData,a=e.showModal,n=e.currentImg,r=e.showSpinner;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(g,{onSubmit:this.handleSubmit}),Object(m.jsxs)("div",{className:"gallery",children:[Object(m.jsx)(b,{onImgClick:this.handleImgClick,imgData:t}),Object(m.jsx)(v.a,{className:"spinner",type:"Oval",color:"#00BFFF",height:80,width:80,visible:r}),0!==t.length&&Object(m.jsx)(j,{onClick:this.handleLoadMore})]}),a&&Object(m.jsx)(O,{url:n.url,alt:n.alt,onClose:this.toggleModal})]})}}]),a}(u.Component));a(47);r.a.render(Object(m.jsx)(w,{}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.4281bd3c.chunk.js.map